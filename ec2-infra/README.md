# ec2-infra

## 1. Burstable

> 1-1. 서버 과부화
> - 부팅할 때
> - 이벤트가 있을 때
>
> 1-2. 고정 성능을 내야할 때, DB 와 계속 연동시켜야할 때 -> T타입보다는 M타입이 더 적합하다.
>
> 1-3. EC2 Unlimited
> - 가불 신용 양에 따라 비용이 발생한다.


## 2. T2를 사용하다가 T3로 바꾸게 되면 실행이 되지 않는다.


## 3. ARM CPU

> 3-1. 웹, 캐시서버에 적합하다.
>
> 3-2. Linux 2, RHEL 7.6 이상, Ubuntu 16.04 이후 버전만 사용 가능


## 4. T3, M5

> 4-1. T3은 간단한 request를 받았을 때 사용
>
> 4-2. 고정적인 리소스 사용시에는 M5


## 5. KeyPair

> 5-1. 여러 개의 키페어를 만들어서 여러 서버에 맞게 사용한다. -> 복잡함
>
> 5-2. AWS는 공개 키만을 유지하고 시작할 때 공개 키를 복사
>
> 5-3. Linux 상의 아이디/패스워드로 사용하는 것이 더 효율적일 수 있다. 특정 서버에 접속하는 사람이 많으면 KeyPair가 비효율적일 수 있다. ex) 대형 프로젝트


## 6. Security Group

> 6-1. 특별히 허용된 것 이외에는 암묵적으로 방어한다.
>
> 6-2. AWS에서 제공하는 무료 방화벽
>
> 6-3. EC2 범위로 방어를 함.
> 
> 6-4. Layer 마다 다른 Security Group을 만들어 적용해야 한다.


## 7. Private IP

> 7-1. Stop/Start 해도 IP는 변하지 않고 고정


## 8. Public IP

> 8-1. Stop/Start 하면 IP가 할당된다.


## 9. Elastic IP

> 9-1. 사용하지 않는 경우 과금 발생
>
> 9-2. Stop/Start해도 IP 주소가 유지된다.


## 10. ENI - Elastic Network Interfaces

> 10-1. AWS 가 알아서 네트워크를 구성해줌 -> EBS
>
> 10-2. 가상 인터페이스를 연결하고 유지


## 11. 확장 네트워킹

> 11-1. 공유형이 많다 -> 간섭이 많음, 네트워크 성능이 떨어짐
>
> 11-2. 독립적으로 사용할 수 있도록 함 -> 네트워크 성능을 향상시킴
>
> 11-3. 100Gbps까지 네트워크 속도를 제공한다.


## 12. EC2 스토리지(EBS - Elastic Block Store)

> 12-1. instance store -> 물리적인 것의 성능을 따라갈 수 있지만, stop/terminate할 시 삭제되는 휘발성이다. EBS는 유지.
>
> 12-2. EBS는 EC2 instance와 독립적으로 관리관다.
>
> 12-3. EBS의 비용은 별도로 발생한다.


## 13. EBS 최적화 옵션

> 13-1. 일반 네트워크와 별도로 EBS 네트워크를 사용하게 되면 EBS	전용 대역을 확보하여 바로 연결된다.


## 14. AMI - Amazon Machine Image

> 14-1. 시작 시에 꼭 필요함.
>
> 14-2. 2a에 만들어진 ec2를 2c에 끌어다가 놓을 수 없기 때문에 사용자정의 AMI 를 타고 이동해야 한다.


## 15. 커뮤니티 AMI

> 15-1. 원하는 배포판의 소프트웨어를 설치할 수 있다.


## 16. 최신 인스턴스(Nitro Hypervisor)


## 17. 라이프 사이클

> 17-1. Runnig
>
> 17-2. Stopped
>
> 17-3. Terminated


## 18. 메트릭 모니터링

> 18-1. CPU, 메모리 등의 사용량을 측정해 준다.
>
> 18-2. default로 5분간 한번 하며, 1분마다 측정하기 원하면 비용을 청구해야 한다.


## 19. Auto recovery

> 19-1. AWS 문제인지 고객(instance) 문제인지 판가름할 수 있음


## 20. Launch Template

> 20-1. 한 번은 번거롭지만, 템플릿을 설정하여 편하게 실행시킬 수 있도록 함.


## 21. 메타 데이터


## 22. 상한으로 제한 완화

> 22-1. ec2의 용량 제한은 없다. 하지만, 20개의 인스턴스까지만 시작할 수 없도록 설정되어있다.


## 23. EC2 결재 내역

> 23-1. 데이터 전송량, EC2, EBS, S3 보관용


## 24. 초 단위 과금


## 25. OS 소프트웨어의 요금

> 25-1. 마켓플레이스에서 사용하는 것은 거의 유료


## 26. AWS 무료 이용 범위

> 26-1. 1대당 750시간이 아니라 account당 750시간으로 나눠 사용하게 된다.


## 27. NAT

> 27.1 NAT 게이트웨이는 Private Subnet 1개당 Public Subnet에 1개 위치하기 때문에 Private Subnet이 3개 존재한다면 하나의 Public Subnet에 3개의 NAT 게이트웨이가 위치하게 된다.


## 28. 정리

>> - EC2 완전히 종량 과금 전세계의 AWS 지역에서 이용할 수 있는 클라우드의 가상 서버
>> - 워크로드에 맞게 다양한 스펙의 인스턴스 유형을 선책할 수 있음.
>> - 스토리지 및 OS 등 다양한 조합 옵션
>> - 풍부한 운용 관리 기능을 통해 서버 운영 단순화, 자공화를 도움
>> - 비용을 확인 최적화하기 쉽고 다양한 비용 관리 기능을 제공
